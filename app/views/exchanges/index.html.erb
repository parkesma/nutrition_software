<h1>Foods</h1>

<table class="table">
	<tr>
		<th>Exchanges</th>
		<th>Categories</th>
		<th>Foods</th>
		<th colspan="3" class="text-right">
			<% if current_license == "owner" %>
				(Creator)
			<% end %>
		</th>
	</tr>
	<% if !@exchanges.nil? %>
		<% @exchanges.each do |e| %>
			<tr>
				<% if current_user == e.user %>
				
					<%= form_for(:exchange, url: exchange_path(e), 
							method: :patch, html: {class: "form-horizontal"}) do |f| %>
						<td colspan="4"><%= f.text_field :name, value: e.name, 
																class: "table-text" %></td>
						<td><a><%= f.submit 'Update', class: "submit-link" %></a></td>
						<td>
							<%= link_to 'Delete', exchange_path(e), method: :delete, 
									data: {confirm: 'Are you sure? This will also delete all associated Categories, Foods, and Meal Plan entries.'} %>
						</td>
					<% end %>
					
				<% else %>
					<td colspan="5"><%= e.name %></td>
					<td class="text-right">
						<% if current_license == "owner" %>
							<%= "(#{e.user.name})" %>
						<% end %>
					</td>
				<% end %>

				<% @e = e %>
				<%= render 'sub_exchanges' %>
			</tr>
		<% end %>
	<% end %>
	<%= form_for(:exchange, url: exchanges_path, method: :post) do |f| %>
		<tr>
			<td colspan="5"><%= f.text_field :name, class: "table-text" %></td>
			<td><a><%= f.submit 'Add New Exchange', class: "submit-link" %></a></td>
		</tr>
	<% end %>
</table>

<table class="table">
	<%= render 'supplement_brands' %>
</table>