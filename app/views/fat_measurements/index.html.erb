<% provide(:title, 'Body Fat') %>
<h1>Body Fat</h1>
<h1 class="hide-on-print"><small>Method: <%= @fat_measurement.bf_method %></small></h1>


<ul class="nav navbar-nav navbar-default col-md-12">  
	<% @fat_measurement.bf_options.each do |bf_option| %>
	  <li>
		 	<%= link_to bf_option, change_method_path(bf_method: bf_option, 
	  			view: "index"), method: :post %>
	  </li>
	<% end %>
</ul><br><br><br>

<div class="hide-on-print">
	<% @submit_text = "save New Measurements" %>
	<% if current_license != "client" %>
		<%= form_for(:fat_measurement, url: fat_measurements_path, 
				method: :post, html: {class: "form-horizontal"}) do |f| %>
			<%= f.hidden_field :bf_method, value: @fat_measurement.bf_method %>
			
			<% @form = f %>
			<%= render 'fat_measurements/fields' %>
	
		<% end %>
	<% end %>
</div>

<% if @fat_measurements.length > 0 %>
	<table class="table table-striped table-bordered" >

		<tr>
			<th class="text-center">Date</th>
			<th class="text-center">Weight</th>
			<th class="text-center">Method</th>
			<th class="text-center">Body Fat%</th>
			<th class="text-center">Lean Mass</th>
			<th class="text-center">Fat Mass</th>
			<th class="text-center">Change in Body Fat%</th>
			<th class="text-center">Change in Lean Mass</th>
			<th class="text-center">Change in Fat Mass</th>
		</tr>

		<%= render @fat_measurements %>
	
	</table>
	
	<!-- BF Chart -->
  <div class="col-md-6 graph">
    <h3 class="text-center">Body Fat%</h3>
    <%= line_chart @bf_chart_hash, discrete: true,
    		library: {hAxis: {title: "Follow Up"},
    		vAxis: {title: "Body Fat%"}} %>
  </div>

	<!-- Weight Chart -->
  <div class="col-md-6 graph">
    <h3 class="text-center">Weight</h3>
    <%= line_chart @weight_chart_hash, discrete: true,
    		library: {hAxis: {title: "Follow Up"},
    		vAxis: {title: "Weight"}}, min: @weight_min, max: @weight_max %>
  </div>
  
	<!-- Lean Mass Chart -->
  <div class="col-md-6 graph">
    <h3 class="text-center">Lean Mass</h3>
    <%= line_chart @lean_chart_hash, discrete: true,
    		library: {hAxis: {title: "Follow Up"},
    		vAxis: {title: "Lean Mass"}} %>
  </div>

	<!-- Fat Mass Chart -->
  <div class="col-md-6 graph">
    <h3 class="text-center">Fat Mass</h3>
    <%= line_chart @fat_chart_hash, discrete: true,
    		library: {hAxis: {title: "Follow Up"},
    		vAxis: {title: "Fat Mass"}} %>
  </div>

<% end %>